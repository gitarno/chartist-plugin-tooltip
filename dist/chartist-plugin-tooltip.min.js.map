{"version":3,"sources":["chartist-plugin-tooltip.js"],"names":["root","factory","define","amd","returnExportsGlobal","exports","module","this","window","document","Chartist","show","element","style","display","hide","hasClass","className","getAttribute","indexOf","next","nextSibling","text","innerText","textContent","defaultOptions","currency","undefined","tooltipOffset","x","y","plugins","tooltip","options","extend","chart","on","event","selector","callback","$chart","addEventListener","e","target","startEvent","$point","tooltipText","meta","value","tooltipFnc","Pie","label","length","replace","$toolTip","innerHTML","setPosition","height","offsetHeight","width","offsetWidth","top","layerY","offsetY","left","layerX","offsetX","tooltipSelector","Bar","donut","container","querySelector","createElement","appendChild","setTimeout","tooltips"],"mappings":";;;;;;CAAC,SAAUA,EAAMC,GACO,kBAAXC,SAAyBA,OAAOC,IAEzCD,UAAW,WACT,MAAQF,GAAKI,oBAAsBH,MAET,gBAAZI,SAIhBC,OAAOD,QAAUJ,IAEjBD,EAAK,6BAA+BC,KAEtCM,KAAM,WA0JN,MAnJC,UAAUC,EAAQC,EAAUC,GAC3B,YAyHA,SAASC,GAAKC,GACZA,EAAQC,MAAMC,QAAU,QAG1B,QAASC,GAAKH,GACZA,EAAQC,MAAMC,QAAU,OAG1B,QAASE,GAASJ,EAASK,GACzB,OAAQ,IAAML,EAAQM,aAAa,SAAW,KAAKC,QAAQ,IAAMF,EAAY,KAAO,GAGtF,QAASG,GAAKR,EAASK,GACrB,EACEL,GAAUA,EAAQS,kBACXT,IAAYI,EAASJ,EAASK,GACvC,OAAOL,GAGT,QAASU,GAAKV,GACZ,MAAOA,GAAQW,WAAaX,EAAQY,YA3ItC,GAAIC,IACFC,SAAUC,OACVC,eACEC,EAAG,EACHC,EAAG,KAYPpB,GAASqB,QAAUrB,EAASqB,YAC5BrB,EAASqB,QAAQC,QAAU,SAAUC,GAInC,MAFAA,GAAUvB,EAASwB,UAAWT,EAAgBQ,GAEvC,SAAiBE,GAyBtB,QAASC,GAAGC,EAAOC,EAAUC,GAC3BC,EAAOC,iBAAiBJ,EAAO,SAAUK,KAClCJ,GAAYtB,EAAS0B,EAAEC,OAAQL,KAClCC,EAASG,KAGf,QAASE,GAAWP,GAChB,GAAIQ,GAASR,EAAMM,OACfG,EAAc,GAEdC,EAAOF,EAAO3B,aAAa,YAAc,GACzC8B,EAAQH,EAAO3B,aAAa,WAEhC,IAAIe,EAAQgB,WACRH,EAAcb,EAAQgB,WAAWF,EAAMC,OACpC,CACH,GAAID,EACAD,GAAeC,EAAO,WAItB,IAAIZ,YAAiBzB,GAASwC,IAAK,CAC/B,GAAIC,GAAQ/B,EAAKyB,EAAQ,WACrBM,GAAMC,OAAS,IACfN,GAAexB,EAAK6B,GAAS,QAKrClB,EAAQP,WACRsB,EAAQf,EAAQP,SAAWsB,EAAMK,QAAQ,+BAAgC,QAE7EP,GAAeE,EAGnBM,EAASC,UAAYT,EACrBU,EAAYnB,GACZ1B,EAAK2C,GAGLG,EAASH,EAASI,aAClBC,EAAQL,EAASM,YAoBrB,QAASJ,GAAYnB,GAInBoB,EAASA,GAAUH,EAASI,aAC5BC,EAAQA,GAASL,EAASM,YAC1BN,EAASzC,MAAMgD,KAAOxB,EAAMyB,QAAUzB,EAAM0B,SAAWN,EAASxB,EAAQL,cAAcE,EAAI,KAC1FwB,EAASzC,MAAMmD,MAAQ3B,EAAM4B,QAAU5B,EAAM6B,SAAWP,EAAQ,EAAI1B,EAAQL,cAAcC,EAAI,KA5FhG,GAAIsC,GAAkB,UAClBhC,aAAiBzB,GAAS0D,IAC5BD,EAAkB,SACThC,YAAiBzB,GAASwC,MAGjCiB,EADEhC,EAAMF,QAAQoC,MACE,iBAEA,eAItB,IAAI7B,GAASL,EAAMmC,UACfhB,EAAWd,EAAO+B,cAAc,oBAC/BjB,KACHA,EAAW7C,EAAS+D,cAAc,OAClClB,EAASrC,UAAY,mBACrBuB,EAAOiC,YAAYnB,GAErB,IAAIG,GAASH,EAASI,aAClBC,EAAQL,EAASM,WAErB7C,GAAKuC,GA8CLlB,EAAG,aAAc+B,EAAiBvB,GAClCR,EAAG,YAAa+B,EAAiBvB,GAEjCR,EAAG,WAAY+B,EAAiB,WAC9BpD,EAAKuC,KAEPlB,EAAG,WAAY+B,EAAiB,WAC9BO,WAAW,WACP3D,EAAKuC,IACP,OAGJlB,EAAG,YAAa,KAAM,SAAUC,GAC9BmB,EAAYnB,QAuCjB7B,OAAQC,SAAUC,UAEdA,SAASqB,QAAQ4C","file":"chartist-plugin-tooltip.min.js","sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], function () {\n      return (root.returnExportsGlobal = factory());\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    root['Chartist.plugins.tooltips'] = factory();\n  }\n}(this, function () {\n\n  /**\n   * Chartist.js plugin to display a data label on top of the points in a line chart.\n   *\n   */\n  /* global Chartist */\n  (function (window, document, Chartist) {\n    'use strict';\n\n    var defaultOptions = {\n      currency: undefined,\n      tooltipOffset: {\n        x: 0,\n        y: -20\n      }\n      // showTooltips: true,\n      // tooltipEvents: ['mousemove', 'touchstart', 'touchmove'],\n      // labelClass: 'ct-label',\n      // labelOffset: {\n      //   x: 0,\n      //   y: -10\n      // },\n      // textAnchor: 'middle'\n    };\n\n    Chartist.plugins = Chartist.plugins || {};\n    Chartist.plugins.tooltip = function (options) {\n\n      options = Chartist.extend({}, defaultOptions, options);\n\n      return function tooltip(chart) {\n        var tooltipSelector = 'ct-point';\n        if (chart instanceof Chartist.Bar) {\n          tooltipSelector = 'ct-bar';\n        } else if (chart instanceof Chartist.Pie) {\n          // Added support for donut graph\n          if (chart.options.donut) {\n            tooltipSelector = 'ct-slice-donut';\n          } else {\n            tooltipSelector = 'ct-slice-pie';\n          }\n        }\n\n        var $chart = chart.container;\n        var $toolTip = $chart.querySelector('.chartist-tooltip');\n        if (!$toolTip) {\n          $toolTip = document.createElement('div');\n          $toolTip.className = 'chartist-tooltip';\n          $chart.appendChild($toolTip);\n        }\n        var height = $toolTip.offsetHeight;\n        var width = $toolTip.offsetWidth;\n\n        hide($toolTip);\n\n        function on(event, selector, callback) {\n          $chart.addEventListener(event, function (e) {\n            if (!selector || hasClass(e.target, selector))\n              callback(e);\n          });\n        }\n        function startEvent(event) {\n            var $point = event.target;\n            var tooltipText = '';\n\n            var meta = $point.getAttribute('ct:meta') || '';\n            var value = $point.getAttribute('ct:value');\n\n            if (options.tooltipFnc) {\n                tooltipText = options.tooltipFnc(meta, value);\n            } else {\n                if (meta) {\n                    tooltipText += meta + '<br>';\n                } else {\n                    // For Pie Charts also take the labels into account\n                    // Could add support for more charts here as well!\n                    if (chart instanceof Chartist.Pie) {\n                        var label = next($point, 'ct-label');\n                        if (label.length > 0) {\n                            tooltipText += text(label) + '<br>';\n                        }\n                    }\n                }\n\n                if (options.currency) {\n                    value = options.currency + value.replace(/(\\d)(?=(\\d{3})+(?:\\.\\d+)?$)/g, \"$1,\");\n                }\n                tooltipText += value;\n            }\n\n            $toolTip.innerHTML = tooltipText;\n            setPosition(event);\n            show($toolTip);\n\n            // Remember height and width to avoid wrong position in IE\n            height = $toolTip.offsetHeight;\n            width = $toolTip.offsetWidth;\n        }\n\n        on('touchstart', tooltipSelector, startEvent );\n        on('mouseover', tooltipSelector, startEvent );\n\n        on('mouseout', tooltipSelector, function () { \n          hide($toolTip);             \n        });\n        on('touchend', tooltipSelector, function () { \n          setTimeout(function(){\n              hide($toolTip);             \n          },3000);\n        });\n\n        on('mousemove', null, function (event) { \n          setPosition(event); \n        });\n\n\n        function setPosition(event) {\n          // For some reasons, on FF, we can't rely on event.offsetX and event.offsetY,\n          // that's why we prioritize event.layerX and event.layerY\n          // see https://github.com/gionkunz/chartist-js/issues/381\n          height = height || $toolTip.offsetHeight;\n          width = width || $toolTip.offsetWidth;\n          $toolTip.style.top = (event.layerY || event.offsetY) - height + options.tooltipOffset.y + 'px';\n          $toolTip.style.left = (event.layerX || event.offsetX) - width / 2 + options.tooltipOffset.x + 'px';\n        }\n      }\n    };\n\n    function show(element) {\n      element.style.display = 'block';\n    }\n\n    function hide(element) {\n      element.style.display = 'none';\n    }\n\n    function hasClass(element, className) {\n      return (' ' + element.getAttribute('class') + ' ').indexOf(' ' + className + ' ') > -1;\n    }\n\n    function next(element, className) {\n      do {\n        element = element.nextSibling;\n      } while (element && !hasClass(element, className));\n      return element;\n    }\n\n    function text(element) {\n      return element.innerText || element.textContent;\n    }\n\n  } (window, document, Chartist));\n\n  return Chartist.plugins.tooltips;\n\n}));\n"]}